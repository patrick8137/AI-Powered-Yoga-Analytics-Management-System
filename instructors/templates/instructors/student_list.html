{% extends 'base.html' %}
{% load static %}
{% block title %}My Students{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="glass-card p-4">
    <h4 class="text-white mb-3">Assigned Students</h4>

    {% if students_data %}
        <div class="table-responsive">
            <table class="table table-dark table-borderless align-middle">
                <thead>
                    <tr class="text-secondary">
                        <th>Name</th>
                        <th>Email</th>
                        <th>Attendance (%)</th>
                        <th>Practice Hours</th>
                        <th>Progress Score</th>
                        <th>Actions</th>
                    </tr>
                </thead>

                <tbody>
                    {% for item in students_data %}
                    <tr>
                        <td class="fw-semibold">
                            {{ item.student.user.get_full_name|default:item.student.user.username }}
                        </td>

                        <td class="text-secondary">
                            {{ item.student.user.email }}
                        </td>

                        <td>
                            {{ item.attendance_percent }}%
                        </td>

                        <td>
                            {{ item.monthly_practice }}
                        </td>

                        <td>
                            {% if item.progress_score >= 75 %}
                                <span class="badge bg-success">
                                    {{ item.progress_score }}
                                </span>
                            {% elif item.progress_score >= 50 %}
                                <span class="badge bg-primary">
                                    {{ item.progress_score }}
                                </span>
                            {% else %}
                                <span class="badge bg-danger">
                                    {{ item.progress_score }}
                                </span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'chat' item.student.user.id %}"
                                 class="btn btn-outline-success btn-sm"> Message</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="text-secondary mb-0">
            No students assigned.
        </p>
    {% endif %}
</div>

{% endblock %}
