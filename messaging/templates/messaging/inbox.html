{% extends "base.html" %}
{% load static %}
{% block title %}Inbox{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="container mt-4">

    <h4 class="mb-4">ðŸ“¥ Inbox</h4>

    {% if broadcasts %}
    <div class="glass-card p-4 mb-4">
        <h5 class="mb-3 text-dark">ðŸ“¢ Admin Announcements</h5>

        {% for msg in broadcasts %}
            <div class="alert alert-info mb-2">
                <strong>Admin:</strong> {{ msg.content }}
                <div class="small text-muted mt-1">
                    {{ msg.created_at|date:"M d, Y â€¢ H:i" }}
                </div>
            </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="glass-card p-4">
        <h5 class="mb-3 text-dark">ðŸ’¬ Messages</h5>

        {% if users %}
            <ul class="list-group list-group-flush">
                {% for user in users %}
                    <li class="list-group-item bg-transparent border-bottom">
                        <a href="{% url 'chat' user.id %}"
                           class="d-flex justify-content-between align-items-center text-decoration-none text-dark">

                            <span>
                                {{ user.get_full_name|default:user.username }}

                                {% if user.is_superuser %}
                                    <span class="badge bg-danger ms-2">Admin</span>
                                {% endif %}
                            </span>

                            <span class="text-muted small">Open</span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-secondary mb-0">No conversations yet.</p>
        {% endif %}
    </div>

</div>
{% endblock %}
